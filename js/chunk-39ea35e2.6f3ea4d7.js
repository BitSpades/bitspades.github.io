(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39ea35e2"],{"0545":function(e,t,n){"use strict";n("db23")},a15b:function(e,t,n){"use strict";var i=n("23e7"),r=n("44ad"),a=n("fc6a"),c=n("a640"),s=[].join,u=r!=Object,l=c("join",",");i({target:"Array",proto:!0,forced:u||!l},{join:function(e){return s.call(a(this),void 0===e?",":e)}})},a640:function(e,t,n){"use strict";var i=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&i((function(){n.call(null,t||function(){throw 1},1)}))}},c5e5:function(e,t,n){"use strict";n.r(t);var i=n("7a23");Object(i["x"])("data-v-3868bbe3");var r={class:"game-play"},a={class:"slide-container"},c=["min","max"],s=Object(i["g"])("div",{style:{margin:"8px 0"}},null,-1),u={class:"dice"},l={id:"v-model-multiple-checkboxes"},o=Object(i["g"])("label",{for:"side1"},"Side 1",-1),d=Object(i["g"])("br",null,null,-1),b=Object(i["g"])("label",{for:"side2"},"Side 2",-1),h=Object(i["g"])("br",null,null,-1),m=Object(i["g"])("label",{for:"side3"},"Side 3",-1),g=Object(i["g"])("br",null,null,-1),O=Object(i["g"])("label",{for:"side4"},"Side 4",-1),j=Object(i["g"])("br",null,null,-1),f=Object(i["g"])("label",{for:"side5"},"Side 5",-1),p=Object(i["g"])("br",null,null,-1),v=Object(i["g"])("label",{for:"side6"},"Side 6",-1),k=Object(i["g"])("br",null,null,-1),w=Object(i["g"])("div",{style:{margin:"8px 0"}},null,-1),x=Object(i["g"])("div",{style:{margin:"8px 0"}},null,-1),y=Object(i["i"])("Make Bet"),A=Object(i["g"])("br",null,null,-1),B=Object(i["g"])("div",{style:{width:"300px"}},'Note: The top "profit on win" is correct, and the bottom "profit on win" always assumes a 50% chance to win',-1),S=Object(i["g"])("br",null,null,-1),H=Object(i["g"])("div",{style:{width:"300px"}},"However, the contract is currently set to always pay out with 50% odds (even if you select anything other than 3 of 6 dice) so the contract will be updated later",-1),C=Object(i["g"])("br",null,null,-1);function P(e,t,n,P,U,N){var M=Object(i["C"])("MatButton"),L=Object(i["C"])("GameHistory2");return Object(i["u"])(),Object(i["f"])(i["a"],null,[Object(i["g"])("div",r,[Object(i["g"])("div",a,[Object(i["L"])(Object(i["g"])("input",{class:"slider",type:"range",step:"0.01",min:e.gameMinimumBet,max:e.gameMaxWinAmount/.98-.01,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.betAmount=t})},null,8,c),[[i["I"],e.betAmount]])]),Object(i["L"])(Object(i["g"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.betAmount=t}),placeholder:"Enter bet amount",onInput:t[2]||(t[2]=function(t){return e.BetAmountUpdated()})},null,544),[[i["I"],e.betAmount]]),s,Object(i["g"])("div",u,[Object(i["g"])("div",l,[Object(i["L"])(Object(i["g"])("input",{type:"checkbox",id:"side1",value:"1","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.diceSides=t})},null,512),[[i["H"],e.diceSides]]),o,d,Object(i["L"])(Object(i["g"])("input",{type:"checkbox",id:"side2",value:"2","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.diceSides=t})},null,512),[[i["H"],e.diceSides]]),b,h,Object(i["L"])(Object(i["g"])("input",{type:"checkbox",id:"side3",value:"3","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.diceSides=t})},null,512),[[i["H"],e.diceSides]]),m,g,Object(i["L"])(Object(i["g"])("input",{type:"checkbox",id:"side4",value:"4","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.diceSides=t})},null,512),[[i["H"],e.diceSides]]),O,j,Object(i["L"])(Object(i["g"])("input",{type:"checkbox",id:"side5",value:"5","onUpdate:modelValue":t[7]||(t[7]=function(t){return e.diceSides=t})},null,512),[[i["H"],e.diceSides]]),f,p,Object(i["L"])(Object(i["g"])("input",{type:"checkbox",id:"side6",value:"6","onUpdate:modelValue":t[8]||(t[8]=function(t){return e.diceSides=t})},null,512),[[i["H"],e.diceSides]]),v,k])]),w,Object(i["g"])("div",null,"Win Chance: "+Object(i["E"])(e.CalculateWinChance),1),Object(i["g"])("div",null,"Profit on win: "+Object(i["E"])(e.ProfitOnWin),1),Object(i["g"])("div",null,"Profit on win: "+Object(i["E"])(e.ProfitOnWinOld),1),x,Object(i["j"])(M,{h:"194",s:"95",l:"16",class:"btn",onClick:e.MakeBet},{default:Object(i["K"])((function(){return[y]})),_:1},8,["onClick"]),A,B,S,H,C]),Object(i["j"])(L)],64)}Object(i["v"])();var U=n("b85c"),N=n("1da1"),M=(n("96cf"),n("d3b7"),n("25f0"),n("99af"),n("c030")),L=n("6779"),I=n("4ee3");Object(i["x"])("data-v-3b9f1b78");var R={class:"game-history"},W=Object(i["g"])("div",null,"Game History",-1),E={class:"test-table"},G=Object(i["g"])("tr",null,[Object(i["g"])("th",null,"ID"),Object(i["g"])("th",null,"Guess"),Object(i["g"])("th",null,"Result"),Object(i["g"])("th",null,"Bet Amount"),Object(i["g"])("th",null,"Winnings")],-1);function D(e,t,n,r,a,c){return Object(i["u"])(),Object(i["f"])("div",R,[W,Object(i["g"])("table",E,[G,(Object(i["u"])(!0),Object(i["f"])(i["a"],null,Object(i["A"])(e.gameHistory,(function(t){return Object(i["u"])(),Object(i["f"])("tr",{key:t,class:Object(i["p"])(t.resolved?t.guess&t.randomnessResult?"win":"lose":"pending")},[Object(i["g"])("td",null,Object(i["E"])(t.id),1),Object(i["g"])("td",null,Object(i["E"])(e.ParseNumToDice(t.guess)),1),Object(i["g"])("td",null,Object(i["E"])(t.resolved?e.ParseNumToDice(t.randomnessResult):"Pending"),1),Object(i["g"])("td",null,Object(i["E"])(t.betAmount),1),Object(i["g"])("td",null,Object(i["E"])(t.resolved?t.winAmount:"Pending"),1)],2)})),128))])])}Object(i["v"])();var _=n("3835"),V=(n("a15b"),n("901e")),T=n.n(V),J=n("315c"),K=n("f168"),X=n("2847"),Z=Object(i["k"])({setup:function(){var e=Object(i["n"])("providerUser"),t=Object(i["n"])("walletAddress"),n=Object(i["n"])("contractGameDice");return{providerUser:e,walletAddress:t,contractGame:n}},data:function(){return{gameHistory:[],gameHistoryIds:{},checkBlockChainLock:!1,gamesPlayedPrevious:0}},methods:{ParseNumToDice:function(e){for(var t=[],n=1;n<=6;n++)e&Math.pow(2,n-1)&&t.push(n);return t.join()},CheckBlockChain:function(){var e=Object(N["a"])(regeneratorRuntime.mark((function e(){var t,n,i,r,a,c,s,u,l,o,d,b,h,m,g,O,j,f,p,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.checkBlockChainLock){e.next=43;break}if(this.checkBlockChainLock=!0,!this.walletAddress){e.next=42;break}return e.next=5,this.contractGame.GetPlayerGamesCount(this.walletAddress);case 5:if(t=e.sent,t!==this.gamesPlayedPrevious){e.next=11;break}return this.checkBlockChainLock=!1,e.abrupt("return");case 11:this.gamesPlayedPrevious=t;case 12:for(n=[],i=t-1;i>=0;i--)i in this.gameHistoryIds&&0!==this.gameHistoryIds[i]||n.push({target:X["b"],func:"playerBets",data:[this.walletAddress,i]});return e.next=16,Object(K["a"])(this.providerUser,n);case 16:r=e.sent,a=0;case 18:if(!(a<r.length)){e.next=42;break}if(c=Object(_["a"])(r[a],8),s=c[0],u=c[1],l=c[2],o=c[4],d=c[5],b=c[6],h=c[7],m=s.toString(),g=u.toNumber(),O=l.toNumber(),j=o.toNumber(),f=Object(J["a"])(new T.a(d)),p=Object(J["a"])(new T.a(b)),!(g in this.gameHistoryIds)){e.next=37;break}v=0;case 28:if(!(v<this.gameHistory.length)){e.next=35;break}if(this.gameHistory[v].id!==m){e.next=32;break}return this.gameHistory[v]={id:m,index:g,guess:O,randomnessResult:j,betAmount:f,winAmount:p,resolved:h},e.abrupt("break",35);case 32:v++,e.next=28;break;case 35:e.next=38;break;case 37:h?this.gameHistory.push({id:m,index:g,guess:O,randomnessResult:j,betAmount:f,winAmount:p,resolved:h}):this.gameHistory.unshift({id:m,index:g,guess:O,randomnessResult:j,betAmount:f,winAmount:p,resolved:h});case 38:this.gameHistoryIds[g]=h?1:0;case 39:a++,e.next=18;break;case 42:this.checkBlockChainLock=!1;case 43:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},watch:{walletAddress:function(e,t){var n,i=this;this.checkBlockChainLock=!1,e?(this.CheckBlockChain(),n=setInterval(Object(N["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",i.CheckBlockChain());case 1:case"end":return e.stop()}}),e)}))),1e4)):clearInterval(n)}}});n("d095");Z.render=D,Z.__scopeId="data-v-3b9f1b78";var q=Z;T.a.config({ROUNDING_MODE:T.a.ROUND_DOWN,EXPONENTIAL_AT:99});var z=Object(i["k"])({components:{MatButton:I["a"],GameHistory2:q},setup:function(){var e=Object(i["n"])("providerUser"),t=Object(i["n"])("signer"),n=Object(i["n"])("walletAddress"),r=Object(i["n"])("walletBalance"),a=Object(i["n"])("gameBalanceMatic"),c=Object(i["n"])("gameBalanceLink"),s=Object(i["n"])("gameMinimumBet"),u=Object(i["n"])("gameMaxWinAmount");return{providerUser:e,signer:t,walletAddress:n,walletBalance:r,gameBalanceMatic:a,gameBalanceLink:c,gameMinimumBet:s,gameMaxWinAmount:u}},data:function(){return{betAmount:"0.1",diceSides:[]}},methods:{BetAmountUpdated:function(){var e,t,n,i=null===(e=this.betAmount)||void 0===e?void 0:e.indexOf(".");-1!==i&&((null===(t=this.betAmount)||void 0===t?void 0:t.length)>i+3&&(this.betAmount=null===(n=this.betAmount)||void 0===n?void 0:n.substr(0,i+3)))},MakeBet:function(){var e=Object(N["a"])(regeneratorRuntime.mark((function e(){var t,n,i,r,a,c,s,u,l,o,d,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.providerUser){e.next=2;break}return e.abrupt("return");case 2:if(!isNaN(this.betAmount)){e.next=4;break}return e.abrupt("return");case 4:if(this.betAmount){e.next=6;break}return e.abrupt("return");case 6:if(0!==this.diceSides.length){e.next=8;break}return e.abrupt("return");case 8:if(!(this.diceSides.length>=6)){e.next=10;break}return e.abrupt("return");case 10:if(t=new T.a(this.betAmount),n=new T.a(this.gameMinimumBet),i=new T.a(this.gameMaxWinAmount),!t.lt(n)){e.next=18;break}return alert("Bet too small"),e.abrupt("return");case 18:if(!t.multipliedBy(.98).gt(i)){e.next=21;break}return alert("Potential win amount is too large"),e.abrupt("return");case 21:r=t.toString(),a=M["a"].utils.parseUnits(r,"ether").toHexString(),c="0xf64d796e",s=0,u=Object(U["a"])(this.diceSides);try{for(u.s();!(l=u.n()).done;)o=l.value,s|=Math.pow(2,parseInt(o)-1)}catch(h){u.e(h)}finally{u.f()}return s=L["utils"].hexZeroPad("0x".concat(s.toString(16)),32).substring(2),d="".concat(c).concat(s),b=[{from:this.walletAddress,to:X["b"],value:a,data:d}],e.next=32,this.providerUser.send("eth_sendTransaction",b);case 32:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},computed:{CalculateWinChance:function(){var e=this.diceSides.length;if(0===e||6===e)return"---";switch(e){case 1:return"16.6%";case 2:return"33%";case 3:return"50%";case 4:return"67%";case 5:return"83%";default:return"---"}},ProfitOnWin:function(){if(isNaN(this.betAmount))return"---";if(!this.betAmount)return"---";var e,t=this.diceSides.length;if(0===t||6===t)return"---";switch(t){case 1:e=.166667;break;case 2:e=.333333;break;case 3:e=.5;break;case 4:e=.666667;break;case 5:e=.833333;break;default:return"---"}var n=new T.a(this.betAmount),i=new T.a(e),r=new T.a(.01),a=n.multipliedBy(r),c=n.minus(a),s=c.dividedBy(i),u=s.minus(n);return u.toString()},ProfitOnWinOld:function(){if(isNaN(this.betAmount))return"---";if(!this.betAmount)return"---";var e=new T.a(this.betAmount).multipliedBy(.98).toString();return e}}});n("0545");z.render=P,z.__scopeId="data-v-3868bbe3";t["default"]=z},d095:function(e,t,n){"use strict";n("fdc0")},db23:function(e,t,n){},fdc0:function(e,t,n){}}]);