(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-157b6f06"],{5496:function(e,t,n){"use strict";n("a5b4")},"81b5":function(e,t,n){},a5b4:function(e,t,n){},ba47:function(e,t,n){"use strict";n("81b5")},eb98:function(e,t,n){"use strict";n.r(t);var a=n("f2bf");Object(a["x"])("data-v-341bdba2");var r={class:"game-play"},s={class:"slide-container"},i=["min","max"],c=Object(a["g"])("div",{style:{margin:"8px 0"}},null,-1),o={class:"coins"},u={class:"svg-container"},l=Object(a["g"])("div",{style:{margin:"8px 0"}},null,-1),b=Object(a["g"])("div",null,"Win Chance: 50%",-1),d=Object(a["g"])("div",{style:{margin:"8px 0"}},null,-1),m=Object(a["i"])("Make Bet");function h(e,t,n,h,g,O){var j=Object(a["C"])("MatButton"),v=Object(a["C"])("GameHistory");return Object(a["u"])(),Object(a["f"])(a["a"],null,[Object(a["g"])("div",r,[Object(a["g"])("div",s,[Object(a["L"])(Object(a["g"])("input",{class:"slider",type:"range",step:"0.01",min:e.gameMinimumBet,max:e.gameMaxWinAmount/.98-.01,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.betAmount=t})},null,8,i),[[a["I"],e.betAmount]])]),Object(a["L"])(Object(a["g"])("input",{style:{color:"black"},"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.betAmount=t}),placeholder:"Enter bet amount",onInput:t[2]||(t[2]=function(t){return e.BetAmountUpdated()})},null,544),[[a["I"],e.betAmount]]),c,Object(a["g"])("div",o,[Object(a["g"])("div",{class:Object(a["p"])(["coin-heads",["0"===e.gameChoice?"selected":"",e.hoverHeads?"hover":""]])},null,2),Object(a["g"])("div",{class:Object(a["p"])(["coin-tails",["1"===e.gameChoice?"selected":"",e.hoverTails?"hover":""]])},null,2),Object(a["g"])("div",u,[(Object(a["u"])(),Object(a["f"])("svg",null,[Object(a["g"])("circle",{cx:"50",cy:"50",r:"50",onMouseover:t[3]||(t[3]=Object(a["M"])((function(t){return e.hoverHeads=!0}),["stop"])),onMouseleave:t[4]||(t[4]=Object(a["M"])((function(t){return e.hoverHeads=!1}),["stop"])),onClick:t[5]||(t[5]=function(t){return e.gameChoice="0"})},null,32),Object(a["g"])("circle",{cx:"162",cy:"50",r:"50",onMouseover:t[6]||(t[6]=Object(a["M"])((function(t){return e.hoverTails=!0}),["stop"])),onMouseleave:t[7]||(t[7]=Object(a["M"])((function(t){return e.hoverTails=!1}),["stop"])),onClick:t[8]||(t[8]=function(t){return e.gameChoice="1"})},null,32)]))])]),l,b,Object(a["g"])("div",null,"Profit on win: "+Object(a["F"])(e.ProfitOnWin),1),d,Object(a["j"])(j,{h:"194",s:"95",l:"16",class:"btn",onClick:t[9]||(t[9]=function(t){return e.MakeBet()})},{default:Object(a["K"])((function(){return[m]})),_:1})]),Object(a["j"])(v)],64)}Object(a["v"])();var g=n("1da1"),O=(n("96cf"),n("d3b7"),n("25f0"),n("99af"),n("c030")),j=n("4ee3");Object(a["x"])("data-v-48e8ba65");var v={class:"game-history"},f=Object(a["g"])("div",null,"Game History",-1),p={class:"test-table"},k=Object(a["g"])("tr",null,[Object(a["g"])("th",null,"ID"),Object(a["g"])("th",null,"Guess"),Object(a["g"])("th",null,"Result"),Object(a["g"])("th",null,"Bet Amount"),Object(a["g"])("th",null,"Winnings")],-1);function A(e,t,n,r,s,i){return Object(a["u"])(),Object(a["f"])("div",v,[f,Object(a["g"])("table",p,[k,(Object(a["u"])(!0),Object(a["f"])(a["a"],null,Object(a["A"])(e.gameHistory,(function(e){return Object(a["u"])(),Object(a["f"])("tr",{key:e,class:Object(a["p"])(e.resolved?e.guess===e.randomnessResult?"win":"lose":"pending")},[Object(a["g"])("td",null,Object(a["F"])(e.id),1),Object(a["g"])("td",null,Object(a["F"])(0===e.guess?"Heads":"Tails"),1),Object(a["g"])("td",null,Object(a["F"])(e.resolved?0===e.randomnessResult?"Heads":"Tails":"Pending"),1),Object(a["g"])("td",null,Object(a["F"])(e.betAmount),1),Object(a["g"])("td",null,Object(a["F"])(e.resolved?e.winAmount:"Pending"),1)],2)})),128))])])}Object(a["v"])();var x=n("3835"),w=n("901e"),y=n.n(w),B=n("315c"),C=n("f168"),H=n("2847"),M=Object(a["k"])({setup:function(){var e=Object(a["n"])("providerUser"),t=Object(a["n"])("walletAddress"),n=Object(a["n"])("contractGame");return{providerUser:e,walletAddress:t,contractGame:n}},data:function(){return{gameHistory:[],gameHistoryIds:{},checkBlockChainLock:!1,gamesPlayedPrevious:0}},methods:{CheckBlockChain:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r,s,i,c,o,u,l,b,d,m,h,g,O,j,v,f,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.checkBlockChainLock){e.next=43;break}if(this.checkBlockChainLock=!0,!this.walletAddress){e.next=42;break}return e.next=5,this.contractGame.GetPlayerGamesCount(this.walletAddress);case 5:if(t=e.sent,t!==this.gamesPlayedPrevious){e.next=11;break}return this.checkBlockChainLock=!1,e.abrupt("return");case 11:this.gamesPlayedPrevious=t;case 12:for(n=[],a=t-1;a>=0;a--)a in this.gameHistoryIds&&0!==this.gameHistoryIds[a]||n.push({target:H["a"],func:"playerBets",data:[this.walletAddress,a]});return e.next=16,Object(C["a"])(this.providerUser,n);case 16:r=e.sent,s=0;case 18:if(!(s<r.length)){e.next=42;break}if(i=Object(x["a"])(r[s],8),c=i[0],o=i[1],u=i[2],l=i[4],b=i[5],d=i[6],m=i[7],h=c.toString(),g=o.toNumber(),O=u.toNumber(),j=l.toNumber(),v=Object(B["a"])(new y.a(b)),f=Object(B["a"])(new y.a(d)),!(g in this.gameHistoryIds)){e.next=37;break}p=0;case 28:if(!(p<this.gameHistory.length)){e.next=35;break}if(this.gameHistory[p].id!==h){e.next=32;break}return this.gameHistory[p]={id:h,index:g,guess:O,randomnessResult:j,betAmount:v,winAmount:f,resolved:m},e.abrupt("break",35);case 32:p++,e.next=28;break;case 35:e.next=38;break;case 37:m?this.gameHistory.push({id:h,index:g,guess:O,randomnessResult:j,betAmount:v,winAmount:f,resolved:m}):this.gameHistory.unshift({id:h,index:g,guess:O,randomnessResult:j,betAmount:v,winAmount:f,resolved:m});case 38:this.gameHistoryIds[g]=m?1:0;case 39:s++,e.next=18;break;case 42:this.checkBlockChainLock=!1;case 43:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},watch:{walletAddress:function(e,t){var n,a=this;this.checkBlockChainLock=!1,e?(this.CheckBlockChain(),n=setInterval(Object(g["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",a.CheckBlockChain());case 1:case"end":return e.stop()}}),e)}))),1e4)):clearInterval(n)}}});n("ba47");M.render=A,M.__scopeId="data-v-48e8ba65";var I=M;y.a.config({ROUNDING_MODE:y.a.ROUND_DOWN,EXPONENTIAL_AT:99});var P="0x6C0B7C299A4c5fBCC33E273b893d733dbA700990",R=Object(a["k"])({components:{MatButton:j["a"],GameHistory:I},props:{},setup:function(){var e=Object(a["n"])("providerUser"),t=Object(a["n"])("signer"),n=Object(a["n"])("walletAddress"),r=Object(a["n"])("walletBalance"),s=Object(a["n"])("gameBalanceMatic"),i=Object(a["n"])("gameBalanceLink"),c=Object(a["n"])("gameMinimumBet"),o=Object(a["n"])("gameMaxWinAmount");return{providerUser:e,signer:t,walletAddress:n,walletBalance:r,gameBalanceMatic:s,gameBalanceLink:i,gameMinimumBet:c,gameMaxWinAmount:o}},data:function(){return{betAmount:"0.1",gameChoice:"",hoverHeads:!1,hoverTails:!1,gameHistory:[],gameHistoryIds:{},checkBlockChainLock:!1}},methods:{BetAmountUpdated:function(){var e,t,n,a=null===(e=this.betAmount)||void 0===e?void 0:e.indexOf(".");-1!==a&&((null===(t=this.betAmount)||void 0===t?void 0:t.length)>a+3&&(this.betAmount=null===(n=this.betAmount)||void 0===n?void 0:n.substr(0,a+3)))},MakeBet:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r,s,i,c,o,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.providerUser){e.next=2;break}return e.abrupt("return");case 2:if(!isNaN(this.betAmount)){e.next=4;break}return e.abrupt("return");case 4:if(this.betAmount){e.next=6;break}return e.abrupt("return");case 6:if(t=new y.a(this.betAmount),n=new y.a(this.gameMinimumBet),a=new y.a(this.gameMaxWinAmount),!t.lt(n)){e.next=14;break}return alert("Bet too small"),e.abrupt("return");case 14:if(!t.multipliedBy(.98).gt(a)){e.next=17;break}return alert("Potential win amount is too large"),e.abrupt("return");case 17:r=t.toString(),s=O["a"].utils.parseUnits(r,"ether").toHexString(),i="0xf64d796e",e.t0=this.gameChoice,e.next="0"===e.t0?23:"1"===e.t0?25:27;break;case 23:return c="0000000000000000000000000000000000000000000000000000000000000000",e.abrupt("break",30);case 25:return c="0000000000000000000000000000000000000000000000000000000000000001",e.abrupt("break",30);case 27:return alert("You must select heads or tails"),e.abrupt("return");case 30:return o="".concat(i).concat(c),u=[{from:this.walletAddress,to:P,value:s,data:o}],e.next=34,this.providerUser.send("eth_sendTransaction",u);case 34:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},computed:{ProfitOnWin:function(){if(isNaN(this.betAmount))return"---";if(!this.betAmount)return"---";var e=new y.a(this.betAmount).multipliedBy(.98).toString();return e}}});n("5496");R.render=h,R.__scopeId="data-v-341bdba2";t["default"]=R}}]);