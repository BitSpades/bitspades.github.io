(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d307545"],{1550:function(e,t,n){},"20fe":function(e,t,n){"use strict";n("1550")},b6b8:function(e,t,n){"use strict";n("e927")},e927:function(e,t,n){},eb98:function(e,t,n){"use strict";n.r(t);var r=n("7a23");Object(r["x"])("data-v-525b5c67");var a={class:"game-play"},s={class:"slide-container"},i=["min","max"],c=Object(r["g"])("div",{style:{margin:"8px 0"}},null,-1),o={class:"coins"},u={class:"svg-container"},l=Object(r["g"])("div",{style:{margin:"8px 0"}},null,-1),b=Object(r["g"])("div",null,"Win Chance: 50%",-1),d=Object(r["g"])("div",{style:{margin:"8px 0"}},null,-1),m=Object(r["i"])("Make Bet");function h(e,t,n,h,g,O){var j=Object(r["C"])("MatButton"),v=Object(r["C"])("GameHistory");return Object(r["u"])(),Object(r["f"])(r["a"],null,[Object(r["g"])("div",a,[Object(r["g"])("div",s,[Object(r["L"])(Object(r["g"])("input",{class:"slider",type:"range",step:"0.01",min:e.gameMinimumBet,max:e.gameMaxWinAmount/.98-.01,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.betAmount=t})},null,8,i),[[r["I"],e.betAmount]])]),Object(r["L"])(Object(r["g"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.betAmount=t}),placeholder:"Enter bet amount",onInput:t[2]||(t[2]=function(t){return e.BetAmountUpdated()})},null,544),[[r["I"],e.betAmount]]),c,Object(r["g"])("div",o,[Object(r["g"])("div",{class:Object(r["p"])(["coin-heads",["0"===e.gameChoice?"selected":"",e.hoverHeads?"hover":""]])},null,2),Object(r["g"])("div",{class:Object(r["p"])(["coin-tails",["1"===e.gameChoice?"selected":"",e.hoverTails?"hover":""]])},null,2),Object(r["g"])("div",u,[(Object(r["u"])(),Object(r["f"])("svg",null,[Object(r["g"])("circle",{cx:"50",cy:"50",r:"50",onMouseover:t[3]||(t[3]=Object(r["M"])((function(t){return e.hoverHeads=!0}),["stop"])),onMouseleave:t[4]||(t[4]=Object(r["M"])((function(t){return e.hoverHeads=!1}),["stop"])),onClick:t[5]||(t[5]=function(t){return e.gameChoice="0"})},null,32),Object(r["g"])("circle",{cx:"162",cy:"50",r:"50",onMouseover:t[6]||(t[6]=Object(r["M"])((function(t){return e.hoverTails=!0}),["stop"])),onMouseleave:t[7]||(t[7]=Object(r["M"])((function(t){return e.hoverTails=!1}),["stop"])),onClick:t[8]||(t[8]=function(t){return e.gameChoice="1"})},null,32)]))])]),l,b,Object(r["g"])("div",null,"Profit on win: "+Object(r["E"])(e.ProfitOnWin),1),d,Object(r["j"])(j,{h:"194",s:"95",l:"16",class:"btn",onClick:e.MakeBet},{default:Object(r["K"])((function(){return[m]})),_:1},8,["onClick"])]),Object(r["j"])(v)],64)}Object(r["v"])();var g=n("1da1"),O=(n("96cf"),n("d3b7"),n("25f0"),n("99af"),n("c030")),j=n("4ee3");Object(r["x"])("data-v-0247d710");var v={class:"game-history"},f=Object(r["g"])("div",null,"Game History",-1),p={class:"test-table"},k=Object(r["g"])("tr",null,[Object(r["g"])("th",null,"ID"),Object(r["g"])("th",null,"Guess"),Object(r["g"])("th",null,"Result"),Object(r["g"])("th",null,"Bet Amount"),Object(r["g"])("th",null,"Winnings")],-1);function A(e,t,n,a,s,i){return Object(r["u"])(),Object(r["f"])("div",v,[f,Object(r["g"])("table",p,[k,(Object(r["u"])(!0),Object(r["f"])(r["a"],null,Object(r["A"])(e.gameHistory,(function(e){return Object(r["u"])(),Object(r["f"])("tr",{key:e,class:Object(r["p"])(e.resolved?e.guess===e.randomnessResult?"win":"lose":"pending")},[Object(r["g"])("td",null,Object(r["E"])(e.id),1),Object(r["g"])("td",null,Object(r["E"])(0===e.guess?"Heads":"Tails"),1),Object(r["g"])("td",null,Object(r["E"])(e.resolved?0===e.randomnessResult?"Heads":"Tails":"Pending"),1),Object(r["g"])("td",null,Object(r["E"])(e.betAmount),1),Object(r["g"])("td",null,Object(r["E"])(e.resolved?e.winAmount:"Pending"),1)],2)})),128))])])}Object(r["v"])();var x=n("3835"),w=n("901e"),y=n.n(w),B=n("315c"),C=n("f168"),H=n("2847"),M=Object(r["k"])({setup:function(){var e=Object(r["n"])("providerUser"),t=Object(r["n"])("walletAddress"),n=Object(r["n"])("contractGame");return{providerUser:e,walletAddress:t,contractGame:n}},data:function(){return{gameHistory:[],gameHistoryIds:{},checkBlockChainLock:!1,gamesPlayedPrevious:0}},methods:{CheckBlockChain:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,s,i,c,o,u,l,b,d,m,h,g,O,j,v,f,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.checkBlockChainLock){e.next=43;break}if(this.checkBlockChainLock=!0,!this.walletAddress){e.next=42;break}return e.next=5,this.contractGame.GetPlayerGamesCount(this.walletAddress);case 5:if(t=e.sent,t!==this.gamesPlayedPrevious){e.next=11;break}return this.checkBlockChainLock=!1,e.abrupt("return");case 11:this.gamesPlayedPrevious=t;case 12:for(n=[],r=t-1;r>=0;r--)r in this.gameHistoryIds&&0!==this.gameHistoryIds[r]||n.push({target:H["a"],func:"playerBets",data:[this.walletAddress,r]});return e.next=16,Object(C["a"])(this.providerUser,n);case 16:a=e.sent,s=0;case 18:if(!(s<a.length)){e.next=42;break}if(i=Object(x["a"])(a[s],8),c=i[0],o=i[1],u=i[2],l=i[4],b=i[5],d=i[6],m=i[7],h=c.toString(),g=o.toNumber(),O=u.toNumber(),j=l.toNumber(),v=Object(B["a"])(new y.a(b)),f=Object(B["a"])(new y.a(d)),!(g in this.gameHistoryIds)){e.next=37;break}p=0;case 28:if(!(p<this.gameHistory.length)){e.next=35;break}if(this.gameHistory[p].id!==h){e.next=32;break}return this.gameHistory[p]={id:h,index:g,guess:O,randomnessResult:j,betAmount:v,winAmount:f,resolved:m},e.abrupt("break",35);case 32:p++,e.next=28;break;case 35:e.next=38;break;case 37:m?this.gameHistory.push({id:h,index:g,guess:O,randomnessResult:j,betAmount:v,winAmount:f,resolved:m}):this.gameHistory.unshift({id:h,index:g,guess:O,randomnessResult:j,betAmount:v,winAmount:f,resolved:m});case 38:this.gameHistoryIds[g]=m?1:0;case 39:s++,e.next=18;break;case 42:this.checkBlockChainLock=!1;case 43:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},watch:{walletAddress:function(e,t){var n,r=this;this.checkBlockChainLock=!1,e?(this.CheckBlockChain(),n=setInterval(Object(g["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r.CheckBlockChain());case 1:case"end":return e.stop()}}),e)}))),1e4)):clearInterval(n)}}});n("b6b8");M.render=A,M.__scopeId="data-v-0247d710";var I=M;y.a.config({ROUNDING_MODE:y.a.ROUND_DOWN,EXPONENTIAL_AT:99});var P="0x6C0B7C299A4c5fBCC33E273b893d733dbA700990",R=Object(r["k"])({components:{MatButton:j["a"],GameHistory:I},props:{},setup:function(){var e=Object(r["n"])("providerUser"),t=Object(r["n"])("signer"),n=Object(r["n"])("walletAddress"),a=Object(r["n"])("walletBalance"),s=Object(r["n"])("gameBalanceMatic"),i=Object(r["n"])("gameBalanceLink"),c=Object(r["n"])("gameMinimumBet"),o=Object(r["n"])("gameMaxWinAmount");return{providerUser:e,signer:t,walletAddress:n,walletBalance:a,gameBalanceMatic:s,gameBalanceLink:i,gameMinimumBet:c,gameMaxWinAmount:o}},data:function(){return{betAmount:"0.1",gameChoice:"",hoverHeads:!1,hoverTails:!1,gameHistory:[],gameHistoryIds:{},checkBlockChainLock:!1}},methods:{BetAmountUpdated:function(){var e,t,n,r=null===(e=this.betAmount)||void 0===e?void 0:e.indexOf(".");-1!==r&&((null===(t=this.betAmount)||void 0===t?void 0:t.length)>r+3&&(this.betAmount=null===(n=this.betAmount)||void 0===n?void 0:n.substr(0,r+3)))},MakeBet:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,s,i,c,o,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.providerUser){e.next=2;break}return e.abrupt("return");case 2:if(!isNaN(this.betAmount)){e.next=4;break}return e.abrupt("return");case 4:if(this.betAmount){e.next=6;break}return e.abrupt("return");case 6:if(t=new y.a(this.betAmount),n=new y.a(this.gameMinimumBet),r=new y.a(this.gameMaxWinAmount),!t.lt(n)){e.next=14;break}return alert("Bet too small"),e.abrupt("return");case 14:if(!t.multipliedBy(.98).gt(r)){e.next=17;break}return alert("Potential win amount is too large"),e.abrupt("return");case 17:a=t.toString(),s=O["a"].utils.parseUnits(a,"ether").toHexString(),i="0xf64d796e",e.t0=this.gameChoice,e.next="0"===e.t0?23:"1"===e.t0?25:27;break;case 23:return c="0000000000000000000000000000000000000000000000000000000000000000",e.abrupt("break",30);case 25:return c="0000000000000000000000000000000000000000000000000000000000000001",e.abrupt("break",30);case 27:return alert("You must select heads or tails"),e.abrupt("return");case 30:return o="".concat(i).concat(c),u=[{from:this.walletAddress,to:P,value:s,data:o}],e.next=34,this.providerUser.send("eth_sendTransaction",u);case 34:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},computed:{ProfitOnWin:function(){if(isNaN(this.betAmount))return"---";if(!this.betAmount)return"---";var e=new y.a(this.betAmount).multipliedBy(.98).toString();return e}}});n("20fe");R.render=h,R.__scopeId="data-v-525b5c67";t["default"]=R}}]);